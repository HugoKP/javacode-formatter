<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../css/javacode.css"/>
	<title>Java Code</title>
</head>
<body>

<div class="javacode" style="width:657px;">

<div class="linenumber">
<span id="001">001</span><span id="002">002</span><span id="003">003</span><span id="004">004</span><span id="005">005</span><span id="006">006</span><span id="007">007</span><span id="008">008</span><span id="009">009</span><span id="010">010</span><span id="011">011</span><span id="012">012</span><span id="013">013</span><span id="014">014</span><span id="015">015</span><span id="016">016</span><span id="017">017</span><span id="018">018</span><span id="019">019</span><span id="020">020</span><span id="021">021</span><span id="022">022</span><span id="023">023</span><span id="024">024</span><span id="025">025</span><span id="026">026</span><span id="027">027</span><span id="028">028</span><span id="029">029</span><span id="030">030</span><span id="031">031</span><span id="032">032</span><span id="033">033</span><span id="034">034</span><span id="035">035</span><span id="036">036</span><span id="037">037</span><span id="038">038</span><span id="039">039</span><span id="040">040</span><span id="041">041</span><span id="042">042</span><span id="043">043</span><span id="044">044</span><span id="045">045</span><span id="046">046</span><span id="047">047</span><span id="048">048</span><span id="049">049</span><span id="050">050</span><span id="051">051</span><span id="052">052</span><span id="053">053</span><span id="054">054</span><span id="055">055</span><span id="056">056</span><span id="057">057</span><span id="058">058</span><span id="059">059</span><span id="060">060</span><span id="061">061</span><span id="062">062</span><span id="063">063</span><span id="064">064</span><span id="065">065</span><span id="066">066</span><span id="067">067</span><span id="068">068</span><span id="069">069</span><span id="070">070</span><span id="071">071</span><span id="072">072</span><span id="073">073</span><span id="074">074</span><span id="075">075</span><span id="076">076</span><span id="077">077</span><span id="078">078</span><span id="079">079</span><span id="080">080</span><span id="081">081</span><span id="082">082</span><span id="083">083</span><span id="084">084</span><span id="085">085</span><span id="086">086</span><span id="087">087</span><span id="088">088</span><span id="089">089</span><span id="090">090</span><span id="091">091</span><span id="092">092</span><span id="093">093</span><span id="094">094</span><span id="095">095</span><span id="096">096</span><span id="097">097</span><span id="098">098</span><span id="099">099</span><span id="100">100</span><span id="101">101</span><span id="102">102</span><span id="103">103</span><span id="104">104</span><span id="105">105</span><span id="106">106</span><span id="107">107</span><span id="108">108</span><span id="109">109</span><span id="110">110</span><span id="111">111</span><span id="112">112</span><span id="113">113</span><span id="114">114</span><span id="115">115</span><span id="116">116</span><span id="117">117</span><span id="118">118</span><span id="119">119</span><span id="120">120</span><span id="121">121</span><span id="122">122</span><span id="123">123</span><span id="124">124</span><span id="125">125</span><span id="126">126</span><span id="127">127</span><span id="128">128</span><span id="129">129</span><span id="130">130</span><span id="131">131</span><span id="132">132</span><span id="133">133</span><span id="134">134</span><span id="135">135</span>
</div>
<pre><code><span class="xw52fz_reserved">package</span> br.com.hkp.javacode_styler;

<span class="xw52fz_reserved">import</span> br.com.hkp.javacode_styler.global.<span class="xw52fz_classname">Global</span>;
<span class="xw52fz_reserved">import</span> <span class="xw52fz_reserved">static</span> br.com.hkp.javacode_styler.global.<span class="xw52fz_classname">Global</span>.<span class="xw52fz_constant">DIF</span>;
<span class="xw52fz_reserved">import</span> <span class="xw52fz_reserved">static</span> br.com.hkp.javacode_styler.global.<span class="xw52fz_classname">Global</span>.<span class="xw52fz_method">fileChooserSettings</span>;
<span class="xw52fz_reserved">import</span> <span class="xw52fz_reserved">static</span> br.com.hkp.javacode_styler.global.<span class="xw52fz_classname">Global</span>.<span class="xw52fz_method">readTextFile</span>;
<span class="xw52fz_reserved">import</span> <span class="xw52fz_reserved">static</span> br.com.hkp.javacode_styler.global.<span class="xw52fz_classname">Global</span>.<span class="xw52fz_method">writeTextFile</span>;
<span class="xw52fz_reserved">import</span> java.io.<span class="xw52fz_classname">File</span>;
<span class="xw52fz_reserved">import</span> java.io.<span class="xw52fz_classname">FilenameFilter</span>;
<span class="xw52fz_reserved">import</span> java.io.<span class="xw52fz_classname">IOException</span>;
<span class="xw52fz_reserved">import</span> java.util.<span class="xw52fz_classname">HashMap</span>;
<span class="xw52fz_reserved">import</span> java.util.regex.<span class="xw52fz_classname">Matcher</span>;
<span class="xw52fz_reserved">import</span> java.util.regex.<span class="xw52fz_classname">Pattern</span>;
<span class="xw52fz_reserved">import</span> javax.swing.filechooser.<span class="xw52fz_classname">FileNameExtensionFilter</span>;

<span class="xw52fz_comment">/******************************************************************************
 *  
 * @since 27 de dezembro de 2020 v1.0
 * @version 1.0
 * @author Hugo Kaulino Pereira
 *****************************************************************************/</span>
<span class="xw52fz_reserved">public</span> <span class="xw52fz_reserved">final</span> <span class="xw52fz_reserved">class</span> <span class="xw52fz_classname">DocStyler</span>
{
    <span class="xw52fz_reserved">private</span> <span class="xw52fz_reserved">static</span> <span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">HashMap</span>&lt;<span class="xw52fz_classname">String</span>, <span class="xw52fz_classname">String</span>&gt; <span class="xw52fz_constant">HASH_MAP</span> = 
        <span class="xw52fz_reserved">new</span> <span class="xw52fz_classname">HashMap</span>&lt;&gt;(1000);
    
    <span class="xw52fz_comment">/*[01]---------------------------------------------------------------------
    
    -------------------------------------------------------------------------*/</span>
    <span class="xw52fz_reserved">private</span> <span class="xw52fz_reserved">static</span> <span class="xw52fz_reserved">void</span> <span class="xw52fz_method">collectElements</span>(<span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">File</span> dir) <span class="xw52fz_reserved">throws</span> <span class="xw52fz_classname">IOException</span>
    {
        <span class="xw52fz_classname">Pattern</span> <span class="xw52fz_constant">REGEX</span> = 
            <span class="xw52fz_classname">Pattern</span>.<span class="xw52fz_method">compile</span>(<span class="xw52fz_literalstring">"&lt;span class=\""</span> + <span class="xw52fz_constant">DIF</span> + <span class="xw52fz_literalstring">".+?&lt;/span&gt;"</span>);
        
        <span class="xw52fz_classname">File</span>[] <span class="xw52fz_method">listFiles</span> = dir.<span class="xw52fz_method">listFiles</span>(<span class="xw52fz_reserved">new</span> <span class="xw52fz_classname">HtmlFilter</span>());
        
        <span class="xw52fz_reserved">for</span> (<span class="xw52fz_classname">File</span> file: <span class="xw52fz_method">listFiles</span>)
        {
              
            <span class="xw52fz_classname">Matcher</span> m = <span class="xw52fz_constant">REGEX</span>.<span class="xw52fz_method">matcher</span>(<span class="xw52fz_method">readTextFile</span>(file));
            
            <span class="xw52fz_reserved">while</span>(m.<span class="xw52fz_method">find</span>())
            {
                <span class="xw52fz_classname">String</span> tag = m.<span class="xw52fz_method">group</span>();
                
                <span class="xw52fz_classname">String</span> element = 
                    <span class="xw52fz_literalchar">'*'</span> +
                    tag.<span class="xw52fz_method">substring</span>(tag.<span class="xw52fz_method">indexOf</span>(<span class="xw52fz_literalchar">'&gt;'</span>) + 1, tag.<span class="xw52fz_method">lastIndexOf</span>(<span class="xw52fz_literalchar">'&lt;'</span>)) +
                    <span class="xw52fz_literalchar">'*'</span>;
                
                <span class="xw52fz_reserved">if</span> (!<span class="xw52fz_constant">HASH_MAP</span>.<span class="xw52fz_method">containsKey</span>(element)) <span class="xw52fz_constant">HASH_MAP</span>.<span class="xw52fz_method">put</span>(element,tag);
                
            }<span class="xw52fz_comment">//while</span>
            
        }<span class="xw52fz_comment">//for</span>
        
        
    }<span class="xw52fz_comment">//collectElements()</span>
    
    <span class="xw52fz_comment">/*[02]---------------------------------------------------------------------
    
    -------------------------------------------------------------------------*/</span>
    <span class="xw52fz_reserved">private</span> <span class="xw52fz_reserved">static</span> <span class="xw52fz_reserved">void</span> <span class="xw52fz_method">editDocumentation</span>(<span class="xw52fz_reserved">final</span> <span class="xw52fz_classname">File</span> file) <span class="xw52fz_reserved">throws</span> <span class="xw52fz_classname">IOException</span>
    {
        <span class="xw52fz_classname">String</span> htmlContent = <span class="xw52fz_method">readTextFile</span>(file);
        
        <span class="xw52fz_reserved">for</span> (<span class="xw52fz_classname">String</span> element: <span class="xw52fz_constant">HASH_MAP</span>.<span class="xw52fz_method">keySet</span>())
        {
            htmlContent = htmlContent.<span class="xw52fz_method">replace</span>(element, <span class="xw52fz_constant">HASH_MAP</span>.<span class="xw52fz_method">get</span>(element));
        }<span class="xw52fz_comment">//for</span>
         
        <span class="xw52fz_method">writeTextFile</span>(file, htmlContent);
        
    }<span class="xw52fz_comment">//editDocumentation()</span>
    
    <span class="xw52fz_comment">/*[03]---------------------------------------------------------------------
    
    -------------------------------------------------------------------------*/</span>
    <span class="xw52fz_reserved">public</span> <span class="xw52fz_reserved">static</span> <span class="xw52fz_reserved">void</span> <span class="xw52fz_method">main</span>(<span class="xw52fz_classname">String</span>[] args)
    {
        <span class="xw52fz_method">fileChooserSettings</span>();
        
        <span class="xw52fz_reserved">try</span>
        {
            <span class="xw52fz_comment">/*
            Obtem o diretorio onde estao os arquivos HTML com fontes java
            */</span>
            <span class="xw52fz_classname">FileNameExtensionFilter</span> filter = 
                <span class="xw52fz_reserved">new</span> <span class="xw52fz_classname">FileNameExtensionFilter</span>(<span class="xw52fz_literalstring">"Diret\u00f3rio"</span>, <span class="xw52fz_literalstring">"x"</span>);

            <span class="xw52fz_classname">File</span> dir = <span class="xw52fz_classname">Global</span>.<span class="xw52fz_method">choose</span>(<span class="xw52fz_literalstring">"Selecione o Diret\u00f3rio"</span>,filter, true);

            <span class="xw52fz_reserved">if</span> (dir == <span class="xw52fz_reserved">null</span>) <span class="xw52fz_classname">System</span>.<span class="xw52fz_method">exit</span>(0);
               
            <span class="xw52fz_method">collectElements</span>(dir);
           
            <span class="xw52fz_comment">/*
            Obtem arquivo HTML a ser editado
            */</span>
            filter = <span class="xw52fz_reserved">new</span> <span class="xw52fz_classname">FileNameExtensionFilter</span>(<span class="xw52fz_literalstring">"HTML"</span>, <span class="xw52fz_literalstring">"html"</span>, <span class="xw52fz_literalstring">"htm"</span>, <span class="xw52fz_literalstring">"HTML"</span>);

            <span class="xw52fz_classname">File</span> documentationFile = 
                <span class="xw52fz_classname">Global</span>.<span class="xw52fz_method">choose</span>
                (
                    <span class="xw52fz_literalstring">"Selecione o arquivo HTML a ser editado"</span>,
                    filter,
                    false
                );

            <span class="xw52fz_reserved">if</span> (documentationFile == <span class="xw52fz_reserved">null</span>) <span class="xw52fz_classname">System</span>.<span class="xw52fz_method">exit</span>(0);
             
            <span class="xw52fz_method">editDocumentation</span>(documentationFile);
           
        }
        <span class="xw52fz_reserved">catch</span> (<span class="xw52fz_classname">IOException</span> e)
        {
            <span class="xw52fz_classname">System</span>.err.<span class="xw52fz_method">println</span>(e);
        }
       
    }<span class="xw52fz_comment">//main()</span>
    
    <span class="xw52fz_comment">/*-------------------------------------------------------------------------
     *                             Classe Interna
     ------------------------------------------------------------------------*/</span>
    <span class="xw52fz_reserved">private</span> <span class="xw52fz_reserved">static</span> <span class="xw52fz_reserved">final</span> <span class="xw52fz_reserved">class</span> <span class="xw52fz_classname">HtmlFilter</span> <span class="xw52fz_reserved">implements</span> <span class="xw52fz_classname">FilenameFilter</span>
    {
        <span class="xw52fz_annotation">@Override</span>
        <span class="xw52fz_reserved">public</span> <span class="xw52fz_reserved">boolean</span> <span class="xw52fz_method">accept</span>(<span class="xw52fz_classname">File</span> dir, <span class="xw52fz_classname">String</span> filename)
        {
            <span class="xw52fz_reserved">return</span> filename.<span class="xw52fz_method">endsWith</span>(<span class="xw52fz_literalstring">".html"</span>);
        }<span class="xw52fz_comment">//accept()</span>
        
    }<span class="xw52fz_comment">//classe HtmlFilter</span>
    
}<span class="xw52fz_comment">//classe DocStyler</span>

</code></pre>
</div>
</body>
</html>